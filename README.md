# ุฑุจุงุช ูุฏุฑุช ููุชุณุงู

ฺฉ ุฑุจุงุช ุชูฺฏุฑุงู ุจุฑุง ูุฏุฑุช ุงูุฑุงุฏ ุดุฑฺฉุชโฺฉููุฏู ุฏุฑ ุณุงูุณโูุง ุณุงูู ููุชุณุงูุ ููุดุชู ุดุฏู ุจุง Go ู PostgreSQL.

## ูฺฺฏโูุง

- ๐ฏ ูุฏุฑุช ฺูุฏ ฺฉูุงุณ/ฺฏุฑูู ุจู ุตูุฑุช ูุณุชูู
- ๐ฅ ฺูุงุฑ ููุด ฺฉุงุฑุจุฑ: Adminุ Studentุ Adultุ Half Adult
- ๐ฐ ุชุนู ูุฑุฎ ูุงู ูุชูุงูุช ุจุฑุง ูุฑ ููุด
- ๐ ูพฺฏุฑ ุฌูุณุงุช ุจุฏูฺฉุงุฑ ู ุตูุฑุชุญุณุงุจ
- โ ุณุณุชู ุชุณูู ุญุณุงุจ ุชูุณุท ุงุฏูู
- ๐ ุงูฺฉุงู ุจุงุฒฺฏุดุช (Revert) ุญุถูุฑ ู ุบุงุจ ุชุง 1 ุณุงุนุช
- ๐ ฺฏุฒุงุฑุดโฺฏุฑ ุงุฒ ุจุฏูโูุง ูุฑ ฺฏุฑูู

## ูพุดโูุงุฒูุง

- Docker ู Docker Compose
- ฺฉ ุฑุจุงุช ุชูฺฏุฑุงู (ุงุฒ [@BotFather](https://t.me/botfather))
- Telegram User ID ุฎูุฏุชุงู (ูโุชูุงูุฏ ุงุฒ [@userinfobot](https://t.me/userinfobot) ุฏุฑุงูุช ฺฉูุฏ)

## ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

### 1. ฺฉููู ฺฉุฑุฏู ูพุฑูฺู

```bash
git clone <repository-url>
cd futsal-bot
```

### 2. ุชูุธู ูุงู ูุญุท

ูุงู `.env.example` ุฑุง ฺฉูพ ฺฉูุฏ ุจู `.env`:

```bash
cp .env.example .env
```

ุณูพุณ ูุงู `.env` ุฑุง ูุฑุงุด ฺฉูุฏ ู ููุงุฏุฑ ุฒุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:

```env
# ุงุทูุงุนุงุช ุฑุจุงุช ุชูฺฏุฑุงู
BOT_TOKEN=your_bot_token_from_botfather
DEFAULT_ADMIN_ID=your_telegram_user_id

# ุชูุธูุงุช ุฏุชุงุจุณ
DB_HOST=postgres
DB_PORT=5432
DB_USER=futsalbot
DB_PASSWORD=your_secure_password
DB_NAME=futsalbot
DB_SSLMODE=disable

# ุชูุธูุงุช ุจุฑูุงูู
APP_PORT=8080
REVERT_TIMEOUT_MINUTES=60

# ุชูุธูุงุช PostgreSQL (ุจุฑุง Docker)
POSTGRES_USER=futsalbot
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=futsalbot
```

### 3. ุงุฌุฑุง ูพุฑูฺู

```bash
docker-compose up -d
```

ุจุฑุง ูุดุงูุฏู ูุงฺฏโูุง:

```bash
docker-compose logs -f bot
```

ุจุฑุง ูุชููู ฺฉุฑุฏู:

```bash
docker-compose down
```

ุจุฑุง ุญุฐู ฺฉุงูู (ุดุงูู ุฏุชุงุจุณ):

```bash
docker-compose down -v
```

## ุงุณุชูุงุฏู

### ุฏุณุชูุฑุงุช ูพุฑุงูุช (PV)

- `/start` - ุดุฑูุน ฺฉุงุฑ ุจุง ุฑุจุงุช ู ููุงุด ููู ุงุตู

### ุฏฺฉููโูุง ูพุฑุงูุช

#### ุจุฑุง ููู ฺฉุงุฑุจุฑุงู:
- **ุซุจุช ูุงู** - ุซุจุช ูุงู ุฏุฑ ฺฉ ฺฉูุงุณ
- **ูุฑุงุด ูุดุฎุตุงุช** - ูุฑุงุด ูุงู ู ููุด
- **ุตูุฑุชุญุณุงุจ** - ูุดุงูุฏู ุชุนุฏุงุฏ ุฌูุณุงุช ุจุฏู ู ูุจูุบ ฺฉู

#### ุจุฑุง ุงุฏููโูุง:
- **ุชุนู ูุฑุฎ** - ุชุนู ูุฑุฎ ูุงู ุจุฑุง ูุฑ ููุด
- **ุชุณูู ุญุณุงุจ ฺฉุงุฑุจุฑ** - ุชุณูู ุญุณุงุจ ุฏุณุช ฺฉุงุฑุจุฑุงู

### ุฏุณุชูุฑุงุช ฺฏุฑูู

โ๏ธ **ุชูุฌู:** ุงู ุฏุณุชูุฑุงุช ููุท ุชูุณุท ุงุฏููโูุง ูุงุจู ุงุฌุฑุง ูุณุชูุฏ.

- `/attendance [user_ids...]` - ุซุจุช ุญุถูุฑ ู ุบุงุจ
  ```
  ูุซุงู: /attendance 123456789 987654321
  ```

- `/revert [record_id]` - ุจุงุฒฺฏุดุช ุฑฺฉูุฑุฏ ุญุถูุฑ ู ุบุงุจ (ุชุง 1 ุณุงุนุช)
  ```
  ูุซุงู: /revert 42
  ```

- `/report` - ููุงุด ฺฏุฒุงุฑุด ุจุฏูโูุง ฺฏุฑูู

## ูุนูุงุฑ ูพุฑูฺู

```
futsal-bot/
โโโ cmd/
โ   โโโ bot/
โ       โโโ main.go              # ููุทู ูุฑูุฏ ุจุฑูุงูู
โโโ internal/
โ   โโโ bot/
โ   โ   โโโ bot.go               # ูุงุฌฺฉ ุงุตู ุฑุจุงุช
โ   โโโ database/
โ   โ   โโโ database.go          # ุงุชุตุงู ู ูุงฺฏุฑุดู
โ   โ   โโโ repository.go        # ุนููุงุช ุฏุชุงุจุณ
โ   โโโ handlers/
โ   โ   โโโ handlers.go          # ููุฏูุฑูุง ุงุตู
โ   โ   โโโ handlers_admin.go    # ููุฏูุฑูุง ุงุฏูู
โ   โโโ models/
โ       โโโ models.go             # ูุฏูโูุง ุฏุงุฏู
โโโ migrations/
โ   โโโ 001_create_users.sql
โ   โโโ 002_create_groups.sql
โ   โโโ 003_create_user_groups.sql
โ   โโโ 004_create_rates.sql
โ   โโโ 005_create_attendance_records.sql
โโโ docker-compose.yml
โโโ Dockerfile
โโโ go.mod
โโโ go.sum
โโโ .env.example
โโโ README.md
```

## ุฌุฏุงูู ุฏุชุงุจุณ

### users
ุฐุฎุฑู ุงุทูุงุนุงุช ูพุงู ฺฉุงุฑุจุฑุงู ุชูฺฏุฑุงู

### groups
ุฐุฎุฑู ุงุทูุงุนุงุช ฺฏุฑููโูุง/ฺฉูุงุณโูุง

### user_groups
ุฐุฎุฑู ุนุถูุช ฺฉุงุฑุจุฑุงู ุฏุฑ ฺฏุฑููโูุง ุจุง ููุด ู ุจุฏู ุขููุง

### rates
ุฐุฎุฑู ูุฑุฎ ูุงู ูุฑ ููุด ุฏุฑ ูุฑ ฺฏุฑูู

### attendance_records
ุฐุฎุฑู ุฑฺฉูุฑุฏูุง ุญุถูุฑ ู ุบุงุจ ุจุฑุง ูุงุจูุช Revert

## ุชูุณุนู

### ุณุงุฎุช ูุฌุฏุฏ ุชุตุงูุฑ Docker

```bash
docker-compose build
```

### ุงุฌุฑุง ูุงฺฏุฑุดูโูุง ุจู ุตูุฑุช ุฏุณุช

ูุงฺฏุฑุดูโูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ููฺฏุงู ุดุฑูุน ุจุฑูุงูู ุงุฌุฑุง ูโุดููุฏ.

### ุฏุณุชุฑุณ ุจู ุฏุชุงุจุณ

```bash
docker-compose exec postgres psql -U futsalbot -d futsalbot
```

## ุนุจโุงุจ

### ูุดุงูุฏู ูุงฺฏโูุง ุฑุจุงุช

```bash
docker-compose logs bot
```

### ูุดุงูุฏู ูุงฺฏโูุง PostgreSQL

```bash
docker-compose logs postgres
```

### ุจุฑุฑุณ ูุถุนุช ุณุฑูุณโูุง

```bash
docker-compose ps
```

### ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณโูุง

```bash
docker-compose restart
```

## ุงููุช

- โ๏ธ ุญุชูุงู `DB_PASSWORD` ุฑุง ุฏุฑ ูุงู `.env` ุชุบุฑ ุฏูุฏ
- ูุงู `.env` ุฑุง ุจู Git ุงุถุงูู ูฺฉูุฏ
- ุงุฒ HTTPS ุจุฑุง ุงุฑุชุจุงุท ุจุง Telegram API ุงุณุชูุงุฏู ูโุดูุฏ
- ูพูุฑุชโูุง ุงฺฉุณูพูุฒ ุดุฏู ููุท ุฑู localhost ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ

## ูุงุณูุณ

MIT

## ูพุดุชุจุงู

ุจุฑุง ฺฏุฒุงุฑุด ูุดฺฉูุงุช ุง ูพุดููุงุฏุงุชุ ูุทูุงู ฺฉ Issue ุงุฌุงุฏ ฺฉูุฏ.
